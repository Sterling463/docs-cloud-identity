<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE section [
<!-- changing authentication endpoints; define entities for US & UK rather than maintaining in text -->
<!ENTITY ENDPOINT-US "https://identity.api.rackspacecloud.com/v2.0/">
<!ENTITY ENDPOINT-UK "https://lon.identity.api.rackspacecloud.com/v2.0/">
]>
<section xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude"
	xmlns:xlink="http://www.w3.org/1999/xlink"
	xml:id="Admin_API_Service_Developer_Operations-d1e1356" version="5.0" role="api-reference">
	<title>Service Developer Operations</title>
	<para>The operations described in this chapter allow service
		developers to get and validate access tokens and to manage
		users, tenants, roles, and service endpoints. </para>
	<para>Most calls to the Admin API require authentication. Two kinds
		of calls are available without authentication: 
		<itemizedlist spacing="compact">
			<listitem>
				<para>
					calls to discover the service, such as obtaining version info, the WADL contract, and the API Developer Guide
				 </para>
			</listitem>
			<listitem>
				<para>
					calls to authenticate and get a token</para>
			</listitem>
		</itemizedlist>
		</para>
	<para> Authentication is performed by passing a valid token in the
			<code>X-Auth-Token</code> header of the client's request to the identity service. 
		If the identity service verifies that the token has (or belongs to a
		user that has) the <code>Admin</code> role, then administrator-level functions can be performed. </para>
	<note>
		<para> For information about creating your first user with the <code>Admin</code> role, 
			refer to OpenStack's <link xlink:href="http://keystone.openstack.org/configuringservices.html">Configuring Services to Work with Keystone</link> publication at 
			<link xlink:href="http://keystone.openstack.org/configuringservices.html">http://keystone.openstack.org/configuringservices.html</link>. 
		</para>
	</note>
	<table rules="all">
		<caption>Authentication Header</caption>
		<thead>
			<tr>
				<td>Header Type</td>
				<td>Name</td>
				<td>Sample Value</td>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td>HTTP/1.1 Request</td>
				<td><code>X-Auth-Token</code></td>
				<td>
					<para> vvvvvvvv-wwww-xxxx-yyyy-zzzzzzzzzzzz</para>
				</td>
			</tr>
		</tbody>
	</table>
	<para>In the authentication service API v2.0, the following calls may
		require the core API or an extension:</para>
	<section xml:id="Token_Operations">
		<title>Token Operations</title>
		<wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
			<wadl:resource href="identity-admin.wadl#tokens">
				<wadl:method href="authenticate"/>
			</wadl:resource>
			<wadl:resource href="identity-admin.wadl#tokenById">
				<wadl:method href="validateToken"/>
				<wadl:method href="checkToken"/>
			</wadl:resource>
			<wadl:resource href="identity-admin.wadl#endpointsForToken">
				<wadl:method href="listEndpointsForToken"/>
			</wadl:resource>
		</wadl:resources>
	</section>
	<section xml:id="User_Operations">
		<title>User Operations</title>
		<wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
			<wadl:resource href="identity-admin.wadl#users">
				<wadl:method href="getUserByName"/>
			</wadl:resource>
			<wadl:resource href="identity-admin.wadl#userid">
				<wadl:method href="getUserById"/>
			</wadl:resource>
			<wadl:resource href="identity-admin.wadl#userRoles">
				<wadl:method href="listUserGlobalRoles"/>
			</wadl:resource>
		</wadl:resources>
	</section>
	<section xml:id="Tenant_Operations">
		<title>Tenant Operations</title>
		<wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
			<wadl:resource href="identity-admin.wadl#tenants">
				<wadl:method href="listTenants"/>
				<wadl:method href="getTenantByName"/>
			</wadl:resource>
			<wadl:resource href="identity-admin.wadl#tenantById">
				<wadl:method href="getTenantById"/>
			</wadl:resource>
			<wadl:resource href="identity-admin.wadl#userRolesForTenant">
				<wadl:method href="listRolesForUserOnTenant"/>
			</wadl:resource>
		</wadl:resources>
		<important>
			<para>
				Rackspace's implementation of the OpenStack Identity Service v2.0 is currently in BETA status
				and does not yet support <code>GET v2.0/tenants/{tenantId}/users/{user_id}/roles</code>; 
				a 501 (notImplemented) will be issued in response to this request.
			</para>
		</important>
	</section>
	<section security="writeronly" xml:id="Endpoint_Template_Operations">
		<!-- Endpoint Operations are only in Global Auth for now; omit from Cloud Auth book -->
		<title>Endpoint Template Operations</title>
		<wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
			<wadl:resource href="OS-KSCATALOG-admin.wadl#endpointTemplates">
				<wadl:method href="endpointTemplates"/>
			</wadl:resource>
			<wadl:resource href="OS-KSCATALOG-admin.wadl#endpointTemplates">
				<wadl:method href="addEndpointTemplate"/>
			</wadl:resource>
			<wadl:resource href="OS-KSCATALOG-admin.wadl#endpointTemplateId">
				<wadl:method href="getEndpointTemplate"/>
			</wadl:resource>
			<wadl:resource href="OS-KSCATALOG-admin.wadl#endpointTemplateId">
				<wadl:method href="deleteEndpointTemplate"/>
			</wadl:resource>
		</wadl:resources>
	</section>
	<section security="writeronly" xml:id="Endpoint_Operations">
		<!-- Endpoint Operations are only in Global Auth for now; omit from Cloud Auth book -->
		<title>Endpoint Operations</title>
		<wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
			<wadl:resource href="OS-KSCATALOG-admin.wadl#endpoints">
				<wadl:method href="listEndpoints"/>
			</wadl:resource>
			<wadl:resource href="OS-KSCATALOG-admin.wadl#endpoints">
				<wadl:method href="addEndpoint"/>
			</wadl:resource>
			<wadl:resource href="OS-KSCATALOG-admin.wadl#endpoint">
				<wadl:method href="getEndpoint"/>
			</wadl:resource>
			<wadl:resource href="OS-KSCATALOG-admin.wadl#endpoint">
				<wadl:method href="deleteEndpoint"/>
			</wadl:resource>
		</wadl:resources>
	</section>
	<section xml:id="Secret_Calls">
		<title>Secret Question and Answer Calls</title>
		<wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
			<wadl:resource href="RAX-KSQA-admin.wadl#secretqa">
				<wadl:method href="getUserSecretQA"/>
			</wadl:resource>
			<wadl:resource href="RAX-KSQA-admin.wadl#secretqa">
				<wadl:method href="updateUserSecretQA"/>
			</wadl:resource>
		</wadl:resources>
	</section>
	<section security="writeronly" xml:id="Impersonation_Calls">
		<!-- Impersonation Calls are scheduled for production 2012-04-15; I don't know how they work now -->
		<title>Impersonation Calls</title>
		<para>placeholder</para>
	</section>
</section>