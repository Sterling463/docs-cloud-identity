<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE section [
<!-- changing authentication endpoints; define entities for US & UK rather than maintaining in text -->
<!ENTITY ENDPOINT-US "https://identity.api.rackspacecloud.com/v2.0/">
<!ENTITY ENDPOINT-UK "https://lon.identity.api.rackspacecloud.com/v2.0/">
]>
<section xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude"
	xmlns:xlink="http://www.w3.org/1999/xlink"
	xml:id="Admin_API_Service_Developer_Operations-d1e1356" version="5.0" role="api-reference">
	<title>Service Developer Operations</title>
	<para>The operations described in this chapter allow service
		developers to get and validate access tokens and to manage
		users, tenants, roles, and service endpoints. </para>
	<para>Most calls to the Admin API require authentication. Two kinds
		of calls are available without authentication: 
		<itemizedlist spacing="compact">
			<listitem>
				<para>
					calls to discover the service, such as obtaining version info, the WADL contract, and the API Developer Guide
				 </para>
			</listitem>
			<listitem>
				<para>
					calls to authenticate and get a token</para>
			</listitem>
		</itemizedlist>
		</para>
	<para> Authentication is performed by passing a valid token in the
			<code>X-Auth-Token</code> header of the client's request to the identity service. 
		If the identity service verifies that the token has (or belongs to a
		user that has) the <code>Admin</code> role, then administrator-level functions can be performed. </para>
	<note>
		<para> For information about creating your first user with the <code>Admin</code> role, 
			refer to OpenStack's <link xlink:href="http://keystone.openstack.org/configuringservices.html">Configuring Services to Work with Keystone</link> publication at 
			<link xlink:href="http://keystone.openstack.org/configuringservices.html">http://keystone.openstack.org/configuringservices.html</link>. 
		</para>
	</note>
	<table rules="all">
		<caption>Authentication Header</caption>
		<thead>
			<tr>
				<td>Header Type</td>
				<td>Name</td>
				<td>Sample Value</td>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td>HTTP/1.1 Request</td>
				<td><code>X-Auth-Token</code></td>
				<td>
					<para> aaaaaaaa-1111-bbbb-2222-ccc3d5e6f777</para>
				</td>
			</tr>
		</tbody>
	</table>
	<para>
		Some of these operations require only the core authentication service API v2.0 and some require extensions to the API.
		If an extension is required, it is included in Rackspace's implementation of the Keystone Identity Service; 
		issuing the calls as described here will use API extensions as needed.
	</para>
	<section xml:id="User_Calls">
		<title>User Calls</title>
		<!--- this section comes from 3 WADLs: core identity-admin + extensions OS-KSADM-admin & RAX-KSKEY-admin -->
		<wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
			<!-- list users -->
			<!-- list user -->
			<wadl:resource href="identity-admin.wadl#users">
				<wadl:method href="getUserByName"/>
			</wadl:resource>
			<wadl:resource href="identity-admin.wadl#userid">
				<wadl:method href="getUserById"/>
			</wadl:resource>
			<wadl:resource href="identity-admin.wadl#userRoles">
				<wadl:method href="listUserGlobalRoles"/>
			</wadl:resource>
			<!-- add user -->
			<wadl:resource href="OS-KSADM-admin.wadl#users">
				<wadl:method href="addUser"/>
			</wadl:resource>
			<!-- update user -->
			<wadl:resource href="OS-KSADM-admin.wadl#userById">
				<wadl:method href="updateUser"/>
			</wadl:resource>
			<!-- delete user -->
			<wadl:resource href="OS-KSADM-admin.wadl#userById">
				<wadl:method href="deleteUser"/>
			</wadl:resource>
			<!-- add API key credential -->
			<wadl:resource href="OS-KSADM-admin.wadl#userCredentials">
				<wadl:method href="addUserCredential"/>
			</wadl:resource>
			<!-- list API key credentials -->
			<wadl:resource href="OS-KSADM-admin.wadl#userCredentials">
				<wadl:method href="listCredentials"/>
			</wadl:resource>
			<!-- update API key credentials -->
			<wadl:resource href="RAX-KSKEY-admin.wadl#userCredentialsByType">
				<wadl:method href="updateUserCredential"/>
			</wadl:resource>
			<!-- delete API key credentials -->
			<wadl:resource href="RAX-KSKEY-admin.wadl#userCredentialsByType">
				<wadl:method href="deleteUserCredential"/>
			</wadl:resource>
			<!-- get user's API key credentials -->
			<wadl:resource href="RAX-KSKEY-admin.wadl#userCredentialsByType">
				<wadl:method href="getUserCredential"/>
			</wadl:resource>
		</wadl:resources>
	</section>
	<section xml:id="Group_Calls">
		<title>Group Calls</title>
		<wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
			<wadl:resource href="RAX-GRPADM-admin.wadl#groups">
				<wadl:method href="listGroups"/>
			</wadl:resource>
			<wadl:resource href="RAX-GRPADM-admin.wadl#groups">
				<wadl:method href="addGroup"/>
			</wadl:resource>
			<wadl:resource href="RAX-GRPADM-admin.wadl#groups">
				<wadl:method href="getGroup"/>
			</wadl:resource>
			<wadl:resource href="RAX-GRPADM-admin.wadl#groups">
				<wadl:method href="updateGroup"/>
			</wadl:resource>
			<wadl:resource href="RAX-GRPADM-admin.wadl#groups">
				<wadl:method href="deleteGroup"/>
			</wadl:resource>
			<wadl:resource href="RAX-GRPADM-admin.wadl#groups">
				<wadl:method href="getUsersForGroup"/>
			</wadl:resource>
			<wadl:resource href="RAX-GRPADM-admin.wadl#groups">
				<wadl:method href="addUserToGroup"/>
			</wadl:resource>
			<wadl:resource href="RAX-GRPADM-admin.wadl#groups">
				<wadl:method href="getGroup"/>
			</wadl:resource>
			<wadl:resource href="RAX-GRPADM-admin.wadl#groups">
				<wadl:method href="removeUserFromGroup"/>
			</wadl:resource>
		</wadl:resources>
	</section>
	<section xml:id="Role_Calls">
		<title>Role Calls</title>
		<wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
			<wadl:resource href="OS-KSADM-admin.wadl#roles">
				<wadl:method href="listRoles"/>
			</wadl:resource>
			<wadl:resource href="OS-KSADM-admin.wadl#userRoleById">
				<wadl:method href="addUserRole"/>
			</wadl:resource>
			<wadl:resource href="OS-KSADM-admin.wadl#roleId">
				<wadl:method href="getRole"/>
			</wadl:resource>
			<!-- notes say
				"No access allowed. Deleting a global role can mess up a lot of stuff.
				We need to wait until identity:admin and identity:service-admin roles
				are separated fully (post migration) before doing this."
			<wadl:resource href="OS-KSADM-admin.wadl#RoleId">
				<wadl:method href="deleteRole"/>
			</wadl:resource>
			-->
			<wadl:resource href="OS-KSADM-admin.wadl#userRoleById">
				<wadl:method href="addUserRole"/>
			</wadl:resource>
			<wadl:resource href="OS-KSADM-admin.wadl#userRoleById">
				<wadl:method href="deleteUserRole"/>
			</wadl:resource>
			<wadl:resource href="OS-KSADM-admin.wadl#users">
				<wadl:method href="listUsers"/>
			</wadl:resource>
		</wadl:resources>
	</section>
	<section xml:id="Token_Operations">
		<title>Token Operations</title>
		<wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
			<wadl:resource href="identity-admin.wadl#tokens">
				<wadl:method href="authenticate"/>
			</wadl:resource>
			<wadl:resource href="identity-admin.wadl#tokenById">
				<wadl:method href="validateToken"/>
				<wadl:method href="checkToken"/>
			</wadl:resource>
			<wadl:resource href="identity-admin.wadl#endpointsForToken">
				<wadl:method href="listEndpointsForToken"/>
			</wadl:resource>
		</wadl:resources>
	</section>
	<section xml:id="Tenant_Operations">
		<title>Tenant Operations</title>
		<wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
			<wadl:resource href="identity-admin.wadl#tenants">
				<wadl:method href="listTenants"/>
				<wadl:method href="getTenantByName"/>
			</wadl:resource>
			<wadl:resource href="identity-admin.wadl#tenantById">
				<wadl:method href="getTenantById"/>
			</wadl:resource>
			<wadl:resource href="identity-admin.wadl#userRolesForTenant">
				<wadl:method href="listRolesForUserOnTenant"/>
			</wadl:resource>
		</wadl:resources>
		<important>
			<para>
				Rackspace's implementation of the OpenStack Identity Service v2.0 is currently in BETA status
				and does not yet support <code>GET v2.0/tenants/{tenantId}/users/{user_id}/roles</code>; 
				a 501 (notImplemented) will be issued in response to this request.
			</para>
		</important>
	</section>
	<section security="writeronly" xml:id="Endpoint_Template_Operations">
		<!-- Endpoint Operations are only in Global Auth for now; omit from Cloud Auth book -->
		<title>Endpoint Template Operations</title>
		<wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
			<wadl:resource href="OS-KSCATALOG-admin.wadl#endpointTemplates">
				<wadl:method href="endpointTemplates"/>
			</wadl:resource>
			<wadl:resource href="OS-KSCATALOG-admin.wadl#endpointTemplates">
				<wadl:method href="addEndpointTemplate"/>
			</wadl:resource>
			<wadl:resource href="OS-KSCATALOG-admin.wadl#endpointTemplateId">
				<wadl:method href="getEndpointTemplate"/>
			</wadl:resource>
			<wadl:resource href="OS-KSCATALOG-admin.wadl#endpointTemplateId">
				<wadl:method href="deleteEndpointTemplate"/>
			</wadl:resource>
		</wadl:resources>
	</section>
	<section security="writeronly" xml:id="Endpoint_Operations">
		<!-- Endpoint Operations are only in Global Auth for now; omit from Cloud Auth book -->
		<title>Endpoint Operations</title>
		<wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
			<wadl:resource href="OS-KSCATALOG-admin.wadl#endpoints">
				<wadl:method href="listEndpoints"/>
			</wadl:resource>
			<wadl:resource href="OS-KSCATALOG-admin.wadl#endpoints">
				<wadl:method href="addEndpoint"/>
			</wadl:resource>
			<wadl:resource href="OS-KSCATALOG-admin.wadl#endpoint">
				<wadl:method href="getEndpoint"/>
			</wadl:resource>
			<wadl:resource href="OS-KSCATALOG-admin.wadl#endpoint">
				<wadl:method href="deleteEndpoint"/>
			</wadl:resource>
		</wadl:resources>
	</section>
	<section xml:id="Secret_Calls">
		<title>Secret Question and Answer Calls</title>
		<wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
			<wadl:resource href="RAX-KSQA-admin.wadl#secretqa">
				<wadl:method href="getUserSecretQA"/>
			</wadl:resource>
			<wadl:resource href="RAX-KSQA-admin.wadl#secretqa">
				<wadl:method href="updateUserSecretQA"/>
			</wadl:resource>
		</wadl:resources>
	</section>
	<section security="writeronly" xml:id="Impersonation_Calls">
		<!-- Impersonation Calls are scheduled for production 2012-04-15; 
			I don't know which WADL they will come from -->
		<title>Impersonation Calls</title>
		<para>placeholder</para>
	</section>
</section>