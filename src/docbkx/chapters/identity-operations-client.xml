<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE section [
<!-- changing authentication endpoints; define entities for US & UK rather than maintaining in text -->
<!ENTITY ENDPOINT-US "https://identity.api.rackspacecloud.com/v2.0/">
<!ENTITY ENDPOINT-UK "https://lon.identity.api.rackspacecloud.com/v2.0/">
]>
<section
		xmlns="http://docbook.org/ns/docbook"
		xml:id="Client_Operations"
		version="5.0">
	<title>Client Operations</title>
	<para>
		Some of these operations require only the core authentication service API v2.0 and some require extensions to the API.
		If an extension is required, it is included in Rackspace's implementation of the Keystone Identity Service; 
		issuing the calls as described here will use API extensions as needed.
	</para>
	<section xml:id="User_Calls">
		<title>Users</title>
		<!--- this section comes from 3 WADLs: core identity-admin + extensions OS-KSADM-admin & RAX-KSKEY-admin -->
		<wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
			<!-- list users -->
			<wadl:resource href="OS-KSADM-admin.wadl#users">
				<wadl:method href="listUsers">
					<wadl:doc>
						<note>
							<para>
								If this request is issued by 
								a customer holding the admin role (<code>Identity:user-admin</code>),
								it returns a list of all users for the tenant.
							</para>
							<para> If this request is issued by a customer holding the user
							role (<code>Identity:default</code>), it
							returns only the customer who issued the
							request. 
							<emphasis role="italic">If you 
								authenticated with the user role, you
								can see only yourself.</emphasis>
							</para>
						</note>
					</wadl:doc>
				</wadl:method>
			</wadl:resource>
			<!-- list user -->
			<wadl:resource href="identity-admin.wadl#users">
				<wadl:method href="getUserByName">
					<note>
						<para>
							If this request is issued by 
							a customer holding the admin role (<code>Identity:user-admin</code>),
							the specific user's information is returned only if that user is associated with the same tenant as the requester's 
							<code>customer-admin</code> token.
						</para>
						<para> If this request is issued by a customer holding the user
							role (<code>Identity:default</code>), information is returned for only the requester. 
							<emphasis role="italic">If you 
								authenticated with the user role, you
								can see only yourself.</emphasis>
						</para>
					</note>
				</wadl:method>
			</wadl:resource>
			<wadl:resource href="identity-admin.wadl#userid">
				<wadl:method href="getUserById">
					
				</wadl:method>
			</wadl:resource>
			<!-- add user -->
			<wadl:resource href="OS-KSADM-admin.wadl#users">
				<wadl:method href="addUser">
					
				</wadl:method>
			</wadl:resource>
			<!-- update user -->
			<wadl:resource href="OS-KSADM-admin.wadl#userById">
				<wadl:method href="updateUser">
					
				</wadl:method>
			</wadl:resource>
			<!-- delete user -->
			<wadl:resource href="OS-KSADM-admin.wadl#userById">
				<wadl:method href="deleteUser">
					
				</wadl:method>
			</wadl:resource>
			<!-- list API key credentials -->
			<wadl:resource href="OS-KSADM-admin.wadl#userCredentials">
				<wadl:method href="listCredentials">
					<wadl:doc>
						<note>
							<para>
								This call is available to customers who hold either 
								the admin role (<code>Identity:user-admin</code>) or the
								user role (<code>Identity:default</code>). In either case,
								the credentials returned are only those of the customer
								who issued the request.
								<emphasis role="italic">You
									can see only yourself.</emphasis>
							</para>
						</note>
					</wadl:doc>
				</wadl:method>
			</wadl:resource>
			<!-- get user's API key credentials -->
			<wadl:resource href="RAX-KSKEY-admin.wadl#userCredentialsByType">
				<wadl:method href="getUserCredential">
				<wadl:doc>
					<note>
						<para>
							This call is available to customers who hold either 
							the admin role (<code>Identity:user-admin</code>) or the
							user role (<code>Identity:default</code>). In either case,
							the credentials returned are only those of the customer
							who issued the request.
							<emphasis role="italic">You
								can see only yourself.</emphasis>
						</para>
					</note>
				</wadl:doc>
				</wadl:method>
			</wadl:resource>
		</wadl:resources>
	</section>
	<section xml:id="Role_Calls">
		<title>Roles</title>
			<wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
				<!-- list global roles available to a user -->
				<wadl:resource href="identity-admin.wadl#userRoles">
					<wadl:method href="listUserGlobalRoles">
						<wadl:doc>
							<note>
									<para>
										This call is available to customers who hold either 
										the admin role (<code>Identity:user-admin</code>) or the
										user role (<code>Identity:default</code>).
									</para>
									<para>
										For customers holding the <code>user</code> role,
										the call is valid only if <code>userID</code> and the <code>customer-user</code> 
										token have the same value for <code>tenant</code>.
									</para>
							</note>
						</wadl:doc>
					</wadl:method>
				</wadl:resource>
			</wadl:resources>
	</section>
	<section xml:id="Token_Calls">
		<title>Tokens</title>
		<wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
			<wadl:resource href="identity-admin.wadl#tokens" >
				<wadl:method href="authenticate" >
					<wadl:doc>
						<note>
						<para>
							This call is available to customers who 
							have
							authenticated as a holder of either 
							the admin role or the
							user role.
						</para>
						<itemizedlist>
							<listitem>
								<para>
									Customers holding the <code>admin</code> role
									must authenticate as <code>Identity:user-admin</code>.
								</para>
							</listitem>
							<listitem>
								<para>
									Customers holding the <code>user</code> role
									must authenticate as <code>Identity:default</code>.
								</para>
							</listitem>
						</itemizedlist>
						</note>
					</wadl:doc>
				</wadl:method>
			</wadl:resource>
		</wadl:resources>
	</section>
	<section xml:id="Tenant_Calls">
		<title>Tenants</title>
		<wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
			<wadl:resource href="identity-admin.wadl#tenants" >
				<wadl:method href="listTenants">
				</wadl:method>
			</wadl:resource>
		</wadl:resources>
	</section>
  </section>