<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE section [
<!ENTITY % common SYSTEM "../../common/common.ent">
%common;
]>
<section 
    xmlns="http://docbook.org/ns/docbook" 
    xmlns:xi="http://www.w3.org/2001/XInclude"
    xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0"
	xml:id="Sample_Catalog_Workflow-d1e266">
	<?dbhtml stop-chunking?>
			<title>Suggested work flow for processing a service catalog response</title>
			<para>When your client issues a successful authentication request, the Cloud Identity service
		returns a service catalog that lists the available services and endpoints to access them.
		(See <link xlink:href="Sample_Request_Response-d1e64.html">Annotated authentication request
			and response</link> for a service catalog example.)</para>
			<para>As the client developer, you must decide how your client can use the contents of its
		service catalog. The first step is to identify a service that you want the client to access.
		Following is one possible work flow for processing the service catalog response to identify
		available services and their endpoints: </para>
			<itemizedlist>
			<listitem>
					<para>If the service catalog lists only one endpoint, use it.</para>
				<para>This endpoint connects your client to the only service available.</para>
				</listitem>
				<listitem>
					<para> If the service catalog lists multiple endpoints, establish a process for the client to
					select the endpoint for the connection:  </para>
					<itemizedlist>
						<listitem>
							<para> If the user does not specify which endpoint to use, generate an error.</para>
						</listitem>
						<listitem>
							<para> If the user specified which endpoint to use, help the user identify that endpoint from
						within the catalog: </para>
							<itemizedlist>
								<listitem>
									<para>
										Support filtering by 
										endpoint name, service name, service type, region name, and version.
									</para>
								</listitem>
								<listitem>
									<para>
										Support manual specification of an endpoint via a URL parameter. 
									</para>
								</listitem>
							</itemizedlist>
						</listitem>
					</itemizedlist>
				</listitem>
			</itemizedlist>
			<tip>
				<para>When you parse an authentication response programmatically, use the service
				<parameter>type</parameter> instead of service <parameter>name</parameter> as the
			basis for determining whether a user has access to a particular kind of service. Service
			type is stable across all releases; new service types can be added, but existing service
			types are not renamed. For example,  if new compute services are added with different
			names, the service <parameter>type</parameter> filter returns all available services. </para>
			</tip>
			<example><title>Connect a client to an endpoint listed as <code>type="compute"</code>.</title>
			
				<orderedlist>
					<listitem>
						<para> Navigate to the endpoint for the specified <literal>compute</literal> service, and use
					its <code>WWW-Authenticate</code> header to determine what authentication server
					it uses. </para>
					</listitem>
					<listitem>
						<para>
							Go to that authentication server and authenticate.
						</para>
					</listitem>
					<listitem>
						<para> Return to the <literal>compute</literal> endpoint and proceed with using the compute service. </para>
					
					</listitem>
				</orderedlist>
			</example>
		</section>
