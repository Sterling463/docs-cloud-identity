<!DOCTYPE section [
<!ENTITY % common SYSTEM "../../common/common.ent">
%common;
]>
  
  <section 
    xmlns="http://docbook.org/ns/docbook"
    xmlns:xi="http://www.w3.org/2001/XInclude"
    xmlns:xsdxt="http://docs.rackspacecloud.com/xsd-ext/v1.0"
    xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0"
    xml:id="MFA_Ops">
    
  <title>Multi-factor authentication</title>
    <para>To improve security, customers can configure Rackspace Cloud accounts to support
    multi-factor authentication which requires users to authenticate in two steps: <orderedlist>
      <listitem>
        <para>Submit an initial <command>POST tokens</command> request to the Identity Service
          endpoint, with username and password credentials.</para>
        <para>The response body returned by the Identity service includes a session ID header and a
          request for additional credentials. </para>
      </listitem>
      <listitem>
        <para>Submit a second <command>POST tokens</command> request that includes the session ID
          header and a passcode retrieved from a device associated with the user's account. </para>
        <para>If the credentials are valid, the Identity service returns an authentication token and
          service catalog that includes the API service <glossterm baseform="endpoint"
            >endpoints</glossterm> available to the user.</para>
      </listitem>
    </orderedlist>
  </para>

    <para>Figure <xref linkend="mfa_auth"
      xrefstyle="select: labelnumber"/> shows the multi-factor
    authentication process flow.<figure xml:id="mfa_auth">
      <title>Multi-factor authentication process flow</title>
      <mediaobject>
        <imageobject>
          <imagedata format="png"
            fileref="../figures/multifactor_auth.png"
            contentdepth="80%" contentwidth="80%" align="center"/>
        </imageobject>
      </mediaobject>
    </figure>
  </para>
  <para>To enable mulit-factor authentication, users must update the account settings to add and
    verify a device that can be used to supply the multi-factor authentication passcode. You can
    configure account settings from the Cloud Control panel, or by using the &CIS; API.</para>
    <para>Figure <xref linkend="mfa_workflow_setup" xrefstyle="select: labelnumber"/> shows the work
    flow to set up multi-factor authentication on an account.</para><figure xml:id="mfa_workflow_setup">
      <title>Multi-factor authentication user account set up work flow </title>
      <mediaobject condition="admin">
        <imageobject>
          <imagedata fileref="../figures/multifactor_setup_user.png" scale="60"
            format="PNG" align="center"/>
        </imageobject>
      </mediaobject>
  <mediaobject condition="client">
        <imageobject>
          <imagedata fileref="../figures/multifactor_setup_user1.png" scale="60"
            align="center"/>
        </imageobject>
      </mediaobject>

    </figure>
  <para>Additionally, Identity and user administrators can define multi-factor authentication policy
    for a domain by configuring the  domain enforrcement setting. For example, if the domain
    enforcement setting is <code>Required</code>, users that have not set up multi-factor
    authentication are requird to enable it before they can access their account.</para>
  <para><guilabel>Learn more</guilabel></para>
    <para>
    <itemizedlist>
      <listitem>
        <para><link xlink:href="proc_mfa_setup-phone.html">Set up multi-factor authentication via
            mobile phone</link></para>
      </listitem>
      <listitem>
        <para>
          <link xlink:href="proc_mfa_admin.html">Add multi-factor authentication enforcement policy
            to Rackspace Cloud accounts</link>
        </para>
      </listitem>
      <listitem>
        <para><link xlink:href="proc_mfa_auth.html">Authenticate from a multi-factor-enabled user
            account</link></para>
      </listitem>
      <listitem>
        <para><link xlink:href="proc_mfa_manage.html">Manage multi-factor authentication settings
            and operation</link></para>
      </listitem>
    </itemizedlist>
  </para>
    <xi:include href="section-mfa-setup-phone.xml"/>
    <xi:include href="section-mfa-setup-OTP.xml" condition="admin"/>
    <xi:include href="section-mfa-admin.xml"/>
    <xi:include href="section-mfa-auth.xml"/>
    <xi:include href="section-mfa-manage.xml"/>
  </section>
