<!DOCTYPE section [
<!ENTITY % common SYSTEM "../../common/common.ent">
%common;
]>
  
  <section 
    xmlns="http://docbook.org/ns/docbook"
    xmlns:xi="http://www.w3.org/2001/XInclude"
    xmlns:xsdxt="http://docs.rackspacecloud.com/xsd-ext/v1.0"
    xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0"
    xml:id="MFA_Ops">
    
  <title>Multi-factor authentication</title>
    <para>Multi-factor authentication is for Rackspace Cloud Customers who require a greater level
    of security when accessing Rackspace Cloud resources. When multi-factor authentication is added
    to user accounts, users have an additional layer of identity verification that offers various
    methods to obtain the second factor for authentication.</para>
    <para>Additionally, Identity and user administrators can enforce multi-factor authentication
    policy at the domain and user level.  For example, if you want to require multi-factor
    authentication, you can configure the domain to restrict user access for new and existing users
    until they update and enable  their account  with a multi-factor authenticaiton device.  When
    this feature is enabled, users are prompted to set up multi-factor authentication before they
    can access Cloud resources.</para>
    <para>With multi-factor authentication enabled, authentication is a two-step process: <orderedlist>
      <listitem>
        <para>A user submits an initial <command>POST tokens</command> request to the Identity
          Service endpoint, with username and password credentials.</para>
        <para>The response body returned by the Identity service includes an X-SessionId header and
          a request for additional credentials. The Identity service also sends an SMS text message
          with a passcode to the phone number associated with the account.</para>
      </listitem>
      <listitem>
        <para>To complete the authentication process, the user submits a second <command>POST
            tokens</command> request, including the session ID header and passcode as
          credentials.</para>
        <para>If the credentials are valid, the Identity service returns an authentication response
          that includes the authentication token and a service catalog showing the available
          services and <glossterm baseform="endpoint">endpoints</glossterm> to access the API for
          each service.</para>
      </listitem>
    </orderedlist>
    </para>

    <para>Figure <xref linkend="mfa_auth"
      xrefstyle="select: labelnumber"/> shows the multi-factor
    authentication process flow.<figure xml:id="mfa_auth">
      <title>Multi-factor authentication process flow</title>
      <mediaobject>
        <imageobject>
          <imagedata format="png"
            fileref="../figures/multifactor_auth.png"
            contentdepth="80%" contentwidth="80%" align="center"/>
        </imageobject>
      </mediaobject>
    </figure>
  </para>
    <para>Users interested in enabling multi-factor authentication must update their &CLOUD; user
    accounts to add a phone number that can be used in the authentication process, verify the phone,
    and enable the user account for multi-factor authentication. This work can be completed from the Cloud Control panel 
    or by using the &CIS; API.</para>
    <para>Figure <xref linkend="mfa_workflow_setup"
      xrefstyle="select: labelnumber"/> provides an overview of the
    work flow to complete these tasks.</para><figure xml:id="mfa_workflow_setup">
      <title>Multi-factor authentication user account set up work flow </title>
      <mediaobject condition="admin">
        <imageobject>
          <imagedata fileref="../figures/multifactor_setup_user.png" scale="60"
            format="PNG" align="center"/>
        </imageobject>
      </mediaobject>
  <mediaobject condition="client">
        <imageobject>
          <imagedata fileref="../figures/multifactor_setup_user1.png" scale="60"
            align="center"/>
        </imageobject>
      </mediaobject>

    </figure>
    <para>For information about using multi-factor authentication capabilities through the Cloud Identity API, 
      see the following topics:
      <itemizedlist>
        <listitem>
          <para><link xlink:href= "proc_mfa_setup.html">Set up multi-factor authentication</link></para>
        </listitem>
        <listitem>
          <para>
          <link xlink:href="proc_mfa_admin.html">Add multifactor authentication enforcement policy to Rackspace Cloud accounts</link>
        </para>
        </listitem>
        <listitem>
          <para><link xlink:href= "proc_mfa_auth.html">Authenticate from a multi-factor-enabled user account</link></para>
        </listitem>
        <listitem><para><link xlink:href= "proc_mfa_manage.html">Manage multi-factor authentication settings and operation</link></para></listitem>
      </itemizedlist>
    </para>
    <xi:include href="section-mfa-setup.xml"/>
    <xi:include href="section-mfa-admin.xml"/>
    <xi:include href="section-mfa-auth.xml"/>
    <xi:include href="section-mfa-manage.xml"/>
  </section>
