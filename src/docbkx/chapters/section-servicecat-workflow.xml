<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE section [
<!ENTITY % common SYSTEM "../../common/common.ent">
%common;
]>
<section 
	xmlns="http://docbook.org/ns/docbook" 
	xmlns:xi="http://www.w3.org/2001/XInclude"
	xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0"
	xml:id="Service_Types-d1e265">
	<title>Suggested work flow for processing a Service Catalog response</title>
	<para>When a client authenticates successfully, the Cloud Identity Service returns a service
		catalog that shows the services available to that client, along with the service endpoints.
		(See <link xlink:href="Sample_Request_Response-d1e64.html">Annotated authentication request
			and response</link> for a service catalog example.)</para>
	<para>As the client developer, you decide how your client processes the service catalog content
		to identity available services and their endpoints.  This workflow provides an example
		process that you can use and adapt for your environment: </para>
	<orderedlist>
		<listitem>
			<para> 
				If the service catalog lists only one endpoint, use it.
				This endpoint connects your client to the only
				service available to that client.
			</para>
		</listitem>
		<listitem>
			<para> If the service catalog lists multiple endpoints, establish a process for the client to
				select the endpoint for the connection:</para>
			<orderedlist numeration="loweralpha">
				<listitem>
					<para> If the user has not specified which endpoint to use,
						generate an error.</para>
				</listitem>
				<listitem>
					<para> If the user has specified which endpoint to use, help
						the user identify that endpoint from
						within the catalog: </para>
					<orderedlist numeration="lowerroman">
						<listitem>
							<para>
								Support filtering by 
								endpoint name, service name, service type, region name, and version.
							</para>
						</listitem>
						<listitem>
							<para>
								Support manual specification of an endpoint via a URL parameter. 
							</para>
						</listitem>
					</orderedlist>
				</listitem>
			</orderedlist>
		</listitem>
	</orderedlist>
	<tip>
		<para>When you parse an authentication response programmatically, use the service
			<parameter>type</parameter> instead of service <parameter>name</parameter> as the
			basis for determining whether a user has access to a particular kind of service. Service
			type is stable across all releases. New service types can be added, but existing service
			types are not renamed. If new compute services are added with different names, the
			service <parameter>type</parameter> filter returns all available services. </para>
	</tip>
	<para><xref linkend="endpoint_connect"/> describes how to connect from the client to a service.</para>
	<example xml:id="endpoint_connect"><title>Connect a client to an endpoint listed as <code>type="compute"</code>.</title>
		
		<orderedlist>
			<listitem>
				<para>
					Navigate to the endpoint for the specified compute, and use its <code>WWW-Authenticate</code>
					header to determine what authentication server it uses.
				</para>
			</listitem>
			<listitem>
				<para>
					Go to that authentication server and authenticate.
				</para>
			</listitem>
			<listitem>
				<para>
					Return to the compute endpoint and proceed with using the compute service.
				</para>
				
			</listitem>
		</orderedlist>
	</example>
</section>
