<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE section [
<!ENTITY % common SYSTEM "../../common/common.ent">
%common;
]>
<section xmlns="http://docbook.org/ns/docbook"
    xmlns:xi="http://www.w3.org/2001/XInclude"
    xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0"
    xml:id="QuickStart-000">
        <title>Quick Start</title>
        <para>Every ReST request against Rackspace Cloud APIs requires
        an authentication token generated by the &CIS;. </para>
    <para>To authenticate, submit a <code>POST /v2.0/tokens</code>
        request, presenting valid Rackspace service
            <emphasis>credentials</emphasis> in the message body to a
        Rackspace <emphasis>authentication endpoint</emphasis>. The
        authentication token is returned in response to a valid
        authentication request submitted with valid credentials. The
        response also returns a service catalog that lists the service
        endpoints that a user can access with the authentication token
        provided. After you have the authentication token, you can use
        it to submit API requests to the available endpoints.</para>
    <para>Complete the following steps to authenticate to the
        Rackspace Cloud and submit API requests.</para>
 
        <para>
        <emphasis role="bold">Step 1:  Obtain an authentication
            token</emphasis></para>
    <para>
        <orderedlist>
            <listitem>
                <para>Get your Rackspace Cloud credentials.</para>
                <informaltable rules="all" width="90%">
                    <col width="39%"/>
                    <col width="11%"/>
                    <col width="50%"/>
                    <thead>
                        <tr>
                            <th>Credentials</th>
                            <th>Type</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>username</code> and
                                   <code>password</code></td>
                            <td>xsd:string</td>
                            <td><para condition="client">The
                                   <code>username</code> and
                                   <code>password</code> are the same
                                   credentials that you use to log in
                                   to the Cloud Control Panel at <link
                                   xlink:href="https://mycloud.rackspace.com"
                                   >Cloud Control
                                panel</link>.</para>
                                <para condition="admin">The
                                   <code>username</code> and
                                    <code>password</code> are the ones that the Identity team 
                                    issued for the service. If you do not have these credentials, submit a ticket to the Nebulous Operations team, 
                                    asking them to create service credentials and establish a service catalog entry.</para></td>
                        </tr>
                        <tr>
                            <td>
                                <code>username</code> and
                                   <code>APIKey</code></td>
                            <td>xsd:string</td>
                            <td><para>You can get your API key from the Rackspace Cloud Control panel.<orderedlist>
                                <listitem>
                                    <para>Log into the <link
                                        xlink:href="https://mycloud.rackspace.com"
                                        >Cloud Control panel</link>.</para>
                                </listitem>
                                <listitem>
                                    <para>On the upper-right side of the top navigation
                                        pain, click your username.</para>
                                </listitem>
                                <listitem>
                                    <para>From the menu, select <guilabel>Account
                                        Settings</guilabel>.</para>
                                </listitem>
                                <listitem>
                                    <para>In the Login Details section of the Account
                                        Settings page, locate the <guilabel>API
                                            Key</guilabel> field and click
                                        <guilabel>Show</guilabel>.</para>
                                </listitem>
                                <listitem>
                                    <para>Copy the API key value and paste it into a text
                                        editor of your choice.</para>
                                </listitem>
                                <listitem>
                                    <para>Click <guilabel>Hide</guilabel> to hide the
                                        value of your API key.</para>
                                </listitem>
                            </orderedlist></para></td>
                        </tr>
                        <tr>
                            <td><parameter>tenantId</parameter> or
                                   <parameter>tenantName</parameter>(Optional)</td>
                            <td>xsd:string</td>
                            <td><para>Specify the tenantId or tenantName for
                                the specified user account. Both the
                                   <parameter>tenantId</parameter> and
                                   <parameter>tenantName</parameter>
                                are optional, but should not be
                                specified together. If both attributes
                                are specified, the server responds
                                with a <errorcode>400</errorcode>
                                <errorname>Bad
                                   Request</errorname>.
                                
                                <note><para>Administrative
                                   users can also authenticate by
                                   submitting<parameter>tenantId</parameter>
                                   and <parameter>token</parameter>
                                   credentials.  For details, see
                                   <link
                                   xlink:href="POST_authenticate_token_v2.0_tokens_Token_Calls.html"
                                   >Authenticate as tenant with
                                   token</link>.</para></note></para></td>
                        </tr>
                    </tbody>
                </informaltable>
            </listitem>
            <listitem> 
                <para>Choose your authentication endpoint. You can use either of 
                    the following endpoints for authentication.<itemizedlist spacing="compact">
                        <listitem>
                            <para>US endpoint: <link xlink:href="&ENDPOINT-US;"
                                >&ENDPOINT-US;</link>. </para>
                        </listitem>
                        <listitem>
                            <para>UK endpoint: <link xlink:href="&ENDPOINT-UK;"
                                >&ENDPOINT-UK;</link>. </para>
                        </listitem>
                    </itemizedlist></para>
            </listitem>
            <listitem>
                <para>Submit a POST tokens request with valid
                    credentials to the chosen endpoint as shown in the
                    following  <link xlink:href="http://curl.haxx.se/"
                        >cURL</link> example: </para><itemizedlist>
                    <listitem>
                        <para>Use your <parameter>username</parameter> and <parameter>password</parameter>:</para>
                        <programlisting language="bash" role="gutter: false"
                        ><?db-font-size 60%?><prompt>$</prompt> curl https://identity.api.rackspacecloud.com/v2.0/tokens  \
 -X POST \
 -d '{"auth":{"passwordCredentials":{"username":"theUserName","password":"thePassword"}}}' \
 -H "Content-type: application/json"</programlisting>
                    </listitem>
                    <listitem>
                        <para>Use your <parameter>username</parameter> and <parameter>API key</parameter>:</para>
                        <programlisting language="bash" role="gutter: false"><?db-font-size 60%?><prompt>$</prompt> curl https://identity.api.rackspacecloud.com/v2.0/tokens  \
 -X POST \
 -d '{"auth":{"RAX-KSKEY:apiKeyCredentials"{"username":"theUserName","apiKey":"thePassword"}}}' \
 -H "Content-type: application/json"</programlisting>
                    </listitem>
                </itemizedlist>
                <para>Successful authentication returns a response
                    with a token <code>id</code> that you can submit
                    in the <code>X-Auth-Token</code> header of all
                    Rackspace Cloud service API requests as evidence
                    that your identity has already been authenticated,
                    The response also provides a service catalog
                    listing the available services that you can access
                    with the token. <note>
                        <para>If a user account is enabled for
                            multi-factor authentication, an additional
                            step is required to obtain the
                            authentication token. For details, see
                                <link
                                xlink:href="POST_authenticateWithMultiFactor_v2.0_tokens_Token_Calls.html"
                                >Authenticate with multi-factor
                                passcode credentials</link>.
                            Multi-factor authentication is only
                            available to Rackspace customers in the
                            Early Access program. </para>
                    </note></para>
            </listitem>
        </orderedlist>
    </para>
    <para>
        <emphasis role="bold">Step 2: Submit an API request to a
            Rackspace Cloud service</emphasis></para>
    <para>After you get an authentication token, you can use it to
        submit API requests to any of the services included in the
        Service catalog.</para>
    <para>The following example shows a cURL request to get information about the Cloud Files service at endpoint
            <code>https://storage101.dfw1.clouddrive.com/v1/MossoCloudFS_aaaaaaaa-bbbb-cccc-dddd-eeeeeeee</code>
            using the <code>X-Auth-Token</code> value to
            authenticate to the service.</para>
        <para>
            <programlisting language="bash" role="gutter: false"><?db-font-size 60%?><prompt>$</prompt> curl https://storage101.dfw1.clouddrive.com/v1/MossoCloudFS_aaaaaaaa-bbbb-cccc-dddd-eeeeeeee  \
-X GET \
-H 'X-Auth-Token:vvvvvvvv-wwww-xxxx-yyyy-zzzzzzzzzzzz' --verbose </programlisting>
        </para>
    <para>
        <emphasis role="bold">Step 3: Re-authenticate after the
            authentication token expires</emphasis></para>
    <para>An authentication token is valid for 24-hours, by default.
        The expiration date and time are provided in the token object
        of the authentication response. </para>
    <para>When an authentication token expires, any API request
        submitted against Rackspace Cloud services returns a
            <literal>401 Unauthorized error</literal>.  To regain
        access, submit another POST tokens request to the Rackspace
        Cloud  authentication endpoint. </para>
    
    
    <para><emphasis role="bold">Learn more</emphasis></para>
    <para>Visit the following links to learn more about &CIS;.</para>
    <para>
        <itemizedlist>
            <listitem>
                <para><link xlink:href="Token_Calls.html">Authentication tokens</link></para>
            </listitem>
            <listitem>
                <para>
                    <link xlink:href="Identity-Concpts.html">Identity concepts</link>
                    </para>
            </listitem>
            <listitem>
                <para>
                <link xlink:href="Sample_Request_Response-d1e64.html">Sample authentication request and response</link>
                </para>
            </listitem>
            <listitem>
                <para>
                    <link xlink:href="API_Operations.html">&CIS; API operations reference</link>
                </para>
            </listitem>
            <listitem>
                <para>
                    <link xlink:href="http://docs-internal.rackspace.com/">API operations references for other Rackspace services</link>
                </para>
            </listitem>
            <listitem condition="admin">
                <para>
                    <link xlink:href="http://docs.rackspace.com">API operations reference for other Rackspace services (Internal documentation)</link>
                </para>
            </listitem>
        </itemizedlist>
    </para>
    <tip>
        <para>You can find language binding examples that can be modified to work with the Cloud
            Identity service in the <link
                xlink:href="http://docs.rackspace.com/sdks/guide/content/intro.html">Rackspace
                Software Development Kits</link>.</para>
    </tip>
    <para security="writeronly">
        <!-- added then deleted this preparatory to 2012-05-16 republication; 
             leaving it hidden while people think -->
        Some of the operations described in this API Developer Guide
        are possible because we have implemented extensions to the
        core Identity API. Extensions are particularly relevant to
        operations on  <olink
            targetdoc="Identity-Admin-Developer-Guide"
            targetptr="Group_Calls">“Groups”</olink>, <olink
            targetdoc="Identity-Admin-Developer-Guide"
            targetptr="Impersonation_Calls">“Impersonations”</olink>,
            <olink targetdoc="Identity-Admin-Developer-Guide"
            targetptr="Role_Calls">“Roles”</olink>, <olink
            targetdoc="Identity-Admin-Developer-Guide"
            targetptr="Secret_Calls">“Secret Questions and
            Answers”</olink>, <olink
            targetdoc="Identity-Admin-Developer-Guide"
            targetptr="Token_Calls">“Tokens”</olink>, and  <olink
            targetdoc="Identity-Admin-Developer-Guide"
            targetptr="User_Calls">“Users”</olink>. </para>
    </section>
