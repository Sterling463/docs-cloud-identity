<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE book [
        <!-- Some useful entities borrowed from HTML -->
        <!ENTITY ndash  "&#x2013;">
        <!ENTITY mdash  "&#x2014;">
        <!ENTITY hellip "&#x2026;">

        <!-- Useful for describing APIs -->
        <!ENTITY GET    '<command xmlns="http://docbook.org/ns/docbook">GET</command>'>
        <!ENTITY PUT    '<command xmlns="http://docbook.org/ns/docbook">PUT</command>'>
        <!ENTITY POST   '<command xmlns="http://docbook.org/ns/docbook">POST</command>'>
        <!ENTITY DELETE '<command xmlns="http://docbook.org/ns/docbook">DELETE</command>'>

        <!ENTITY ARROW  '<inlinemediaobject xmlns="http://docbook.org/ns/docbook">
                 <imageobject>
                  <imagedata fileref="img/Arrow_east.svg"
                             format="SVG" scale="60"/>
                </imageobject>
              </inlinemediaobject>'>

        <!ENTITY CODES       'Normal Response Code(s):'>
        <!ENTITY ERROR_CODES 'Error Response Code(s):'>

        <!-- Information about the extension -->
        <!ENTITY VERSION  "v1.0">
        <!ENTITY PUB_DATE "2011-09-13">
        <!ENTITY ALIAS "RAX-KSKEY">
        <!ENTITY URI_REFHEAD '
        <thead xmlns="http://docbook.org/ns/docbook">
        <tr>
        <td colspan="1">Verb</td>
        <td colspan="1">URI</td>
        <td colspan="4">Description</td>
        </tr>
        </thead>'>
        <!ENTITY NAMESPACE "http://docs.rackspace.com/identity/api/ext/RAX-KSKEY/v1.0">
        <!ENTITY CURRENTGUIDE "http://docs.rackspacecloud.com/auth/api/v2.0/RAX-KSKEY-admin-devguide.pdf">
        <!ENTITY EXTENSIONXSD "http://docs.rackspacecloud.com/auth/api/v2.0/RAX-KSKEY/RAX-KSKEY-credentials.xsd">
        <!ENTITY CURRENTWADL "http://docs.rackspacecloud.com/auth/api/v2.0/RAX-KSKEY/RAX-KSKEY-admin.wadl">
        <!ENTITY APIKEYCREDENTIALSREQUESTXML "https://raw.github.com/openstack/keystone/master/keystone/content/common/samples/apiKeyCredentials.xml">
        <!ENTITY APIKEYCREDENTIALSREQUESTJSON "https://raw.github.com/openstack/keystone/master/keystone/content/common/samples/apiKeyCredentials.json">
        <!ENTITY APIKEYCREDENTIALSRESPONSEXML "https://raw.github.com/openstack/keystone/master/keystone/content/common/samples/auth.xml">
        <!ENTITY APIKEYCREDENTIALSRESPONSEJSON "https://raw.github.com/openstack/keystone/master/keystone/content/common/samples/auth.json">
        <!ENTITY EXTENSIONQUERYRESPONSEXML "https://raw.github.com/openstack/keystone/master/keystone/contrib/extensions/admin/raxkey/extension.xml">
        <!ENTITY EXTENSIONQUERYRESPONSEJSON "https://raw.github.com/openstack/keystone/master/keystone/contrib/extensions/admin/raxkey/extension.json">
        
        
]>
<book xmlns="http://docbook.org/ns/docbook"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      xmlns:svg="http://www.w3.org/2000/svg"
      xmlns:m="http://www.w3.org/1998/Math/MathML"
      xmlns:html="http://www.w3.org/1999/xhtml"
      version="5.0"  status="draft" xml:id="RAX-KSKEY-0001">
    <title>RAX-KSKEY Extension Admin Developer Guide</title>
    <titleabbrev>RAX-KSKEY Admin DevGuide</titleabbrev>
  <info>
    <author>
      <personname>
        <firstname/>
        <surname/>
      </personname>
      <affiliation>
        <orgname>Rackspace Cloud</orgname>
      </affiliation>
    </author>
    <copyright>
        <year>2011</year>
        <holder>Rackspace US, Inc.</holder>
    </copyright>
    <releaseinfo>EXT v1.0</releaseinfo>
    <productname>RAX-KSKEY Extension</productname>
    <pubdate>&PUB_DATE;</pubdate>
    <legalnotice role="rs-api">
        <annotation>
            <remark>Copyright details are filled in by the template.</remark>
        </annotation>
    </legalnotice>
    <abstract>
      <para> This document is intended for service developers
                interested in using the Rackspace API Key
                Authentication Admin Extension along with the
                OpenStack Keystone Identity Service
                    (<abbrev>API</abbrev>). </para>
    </abstract>
  </info>
    <chapter xml:id="About_RAX-KSKEY-0000">
      <title>About This Extension</title>
      <variablelist spacing="compact">
          <varlistentry>
              <term>Name</term>
              <listitem>
                  <para>Rackspace API Key Authentication Admin Extension</para>
              </listitem>
          </varlistentry>
          <varlistentry>
              <term>Namespace</term>
              <listitem>
                  <para>&NAMESPACE;</para>
              </listitem>
          </varlistentry>
          <varlistentry>
              <term>Alias</term>
              <listitem>
                  <para>&ALIAS;</para>
              </listitem>
          </varlistentry>
          <varlistentry>
              <term>Dependencies</term>
              <listitem>
                  <para>OpenStack Keystone Identity Service</para>
                  <para>>&ALIAS; Extension</para>
              </listitem>
          </varlistentry>
          <varlistentry>
              <term>Doc Link (PDF)</term>
              <listitem>
                  <para>
                        <link xlink:href="&CURRENTGUIDE;">&CURRENTGUIDE;</link>
                    </para>
              </listitem>
          </varlistentry>
          <varlistentry>
              <term>Doc Link (WADL)</term>
              <listitem>
                  <para>
                      <link xlink:href="&CURRENTWADL;">&CURRENTWADL;</link>
                  </para>
              </listitem>
          </varlistentry>
          <varlistentry>
              <term>Doc Link (XSD)</term>
              <listitem>
                  <para>
                      <link xlink:href="&EXTENSIONXSD;">&EXTENSIONXSD;</link>
                  </para>
              </listitem>
          </varlistentry>
          <varlistentry>
              <term>Short Description</term>
              <listitem>
                  <para> Rackspace extension to Keystone v2.0 API
                        enabling API Key authentication. </para>
              </listitem>
          </varlistentry>
      </variablelist>
      <?hard-pagebreak?>
      <example>
          <title>Extension Query Response: XML</title>
          <programlisting language="xml"><xi:include href="&EXTENSIONQUERYRESPONSEXML;" parse="text"></xi:include></programlisting>
      </example>
      <example>
          <title>Extension Query Response: JSON</title>
          <programlisting language="javascript"><xi:include href="&EXTENSIONQUERYRESPONSEJSON;" parse="text"/></programlisting>
      </example>
      <section xml:id="History-0001">
          <title>Document Change History</title>
          <informaltable rules='all'>
              <thead>
                  <tr>
                      <td align="center" colspan="1">Revision Date</td>
                      <td align="center" colspan="4">Summary of Changes</td>
                  </tr>
              </thead>
              <tbody>
                  <tr>
                      <td colspan="1" align="center">Sep. 13, 2011</td>
                      <td colspan="4">
                          <itemizedlist spacing="compact">
                              <listitem>
                                  <para>
                                      Initial release.
                                  </para>
                              </listitem>
                          </itemizedlist>
                      </td>
                  </tr>
              </tbody>
          </informaltable>
      </section>
  </chapter>
  <chapter xml:id="Changes-0001">
      <title>Summary of Changes</title>
      <para> The Rackspace API Key Authentication Admin Extension
            (RAX-KSKEY) allows Create, Read, Update, and Delete (CRUD)
            operations on <parameter>apikeyCredentials</parameter>. </para>
      <section xml:id="NewHeaders-0001">
          <title>New Headers</title>
          <para>None.</para>
      </section>
      <section xml:id="NewFaults-0001">
          <title>New Faults</title>
          <para>None.</para>
      </section>
      <section xml:id="NewResources-0001">
          <title>New Resources</title>
          <para>None.</para>
      </section>
      <section xml:id="NewActions-0001">
          <title>New Actions</title>
          <para>None.</para>
      </section>
      <section xml:id="NewElements-0001">
          <title>New Elements</title>
          <section xml:id="apikeyCredentials-0002">
              <title>apikeyCredentials</title>
              <para>The RAX-KSKEY extension allows authentication
                    calls to accept a new type of credentials:
                        <parameter>apikeyCredentials</parameter>.
                    These are additional credentials defined to
                    support Rackspace-style authentication, using an
                    API key as an alternative to a password. Examples
                    of <parameter>apikeyCredentials</parameter> are
                    illustrated below.</para>
              <example>
                  <title>Authentication with apikeyCredentials
                        Request: XML</title>
                  <programlisting language="xml"><xi:include href="&APIKEYCREDENTIALSREQUESTXML;" parse="text"/></programlisting>
              </example>
              <example>
                  <title>Authentication with apikeyCredentials
                        Request: JSON</title>
                  <programlisting language="javascript"><xi:include href="&APIKEYCREDENTIALSREQUESTJSON;" parse="text"/></programlisting>
              </example>
          </section>
      </section>    
      <section xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          xml:id="Admin_API_Service_Developer_Operations-d1e1357" version="5.0" role="api-reference">
          <title>RAX-KSKEY-admin Extension API Operations</title>
          <table rules="all">
              <caption>Authentication Header</caption>
              <thead>
                  <tr>
                      <td>Header Type</td>
                      <td>Name</td>
                      <td>Sample Value</td>
                  </tr>
              </thead>
              <tbody>
                  <tr>
                      <td>HTTP/1.1 Request</td>
                      <td><code>X-Auth-Token</code></td>
                      <td>vvvvvvvv-wwww-xxxx-yyyy-zzzzzzzzzzzz</td>
                  </tr>
              </tbody>
          </table>
          <para>The behavior of the following operations is altered by
                the Rackspace API Key Authentication Extension:</para>
          <section xml:id="User_Operations_RAX_KSKEY">
              <title>User Operations</title>
              <wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
                  <wadl:resource href="RAX-KSKEY-admin.wadl#userCredentials">
                      <wadl:method href="addUserCredential"/>
                      <wadl:method href="listCredentials"/>
                  </wadl:resource>
                  <wadl:resource href="RAX-KSKEY-admin.wadl#userCredentialsByType">
                      <wadl:method href="listCredentialsByType"/>
                      <wadl:method href="updateUserCredential"/>
                      <wadl:method href="deleteUserCredential"/>
                      <wadl:method href="getUserCredential"/>
                  </wadl:resource>
              </wadl:resources>
          </section>	
      </section>
  </chapter>
</book>